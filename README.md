
# Planet 4 CircleCI build containers

[![CircleCI](https://circleci.com/gh/greenpeace/planet4-circleci.svg?style=shield)](https://circleci.com/gh/greenpeace/planet4-circleci)

Performs builds and tests for the Planet 4 web application and associated infrastructure

Supports automatic release versioning via CI commands on the develop branch.
To use, push a commit to github which contains a comment such as below:

```
# Creates a new release branch 'release/v1.2.3'
git commit -m "[ci tag v1.2.3]"

# Creates a new release branch 'release/v1.2.3-rc1'
git commit -m "[ci promote v1.2.3-rc1]"
```

The commands `ci promote`, `ci tag` and `ci release` are synonymous and interchangeable.

---

The base image builds upon the `circleci/php:7.3-node` image and adds:
-   [ag](https://github.com/ggreer/the_silver_searcher)
-   [bats](https://www.npmjs.com/package/bats) 1.2.0
-   [gcloud](https://cloud.google.com/sdk/docs/#install_the_latest_cloud_tools_version_cloudsdk_current_version) 316.0.0
-   [git-flow](https://github.com/petervanderdoes/gitflow-avh) 1.12.3
-   [hadolint](https://github.com/hadolint/hadolint) 1.18.0
-   [helm2](https://github.com/kubernetes/helm) 2.17.0
-   [helm3](https://github.com/kubernetes/helm) 3.4.2
-   [junit-merge](https://www.npmjs.com/package/junit-merge) 2.0.0
-   [shellcheck](https://github.com/koalaman/shellcheck) 0.7.1
-   [shfmt](https://github.com/mvdan/sh) 3.1.2
-   [tap-xunit](https://github.com/aghassemi/tap-xunit) 2.4.1
-   [trivy](https://github.com/knqyf263/trivy) 0.14.0
-   [yamllint](https://pypi.org/project/yamllint) 1.25.0
-   [yq](https://pypi.org/project/yq) 2.11.1

Upstream images are [CircleCI build images](https://github.com/circleci/circleci-images/)

---

__Do not edit this file, make changes in the template file: `README.md.in`__
Build: https://circleci.com/gh/greenpeace/planet4-circleci/1666
